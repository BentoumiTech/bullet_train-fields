var t=require("stimulus");function e(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}require("@simonwep/pickr/dist/themes/monolith.min.css");var o=e(require("@simonwep/pickr"));function r(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,i(t,e)}function i(t,e){return i=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},i(t,e)}var n=function(t){function e(){return t.apply(this,arguments)||this}return r(e,t),e.prototype.clickShadowField=function(t){t.preventDefault(),this.shadowFieldTarget.click()},e}(t.Controller);n.targets=["shadowField"];var a=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var o=e.prototype;return o.pickImageAndUpload=function(t){t.preventDefault();var e=["local","url","camera"];this.hasGoogleApiKeyValue&&e.push("image_search");var o={cloud_name:this.cloudNameValue,apiKey:this.apiKeyValue,upload_preset:this.uploadPresetValue,upload_signature:this.getCloudinarySignature.bind(this),multiple:!1,sources:this.hasSourcesValue?this.sourcesValue.split(","):e,search_by_rights:!this.hasSearchByRightsValue||!1!==this.searchByRightsValue};this.hasGoogleApiKeyValue&&(o.google_api_key=this.googleApiKeyValue),cloudinary.openUploadWidget(o,this.handleWidgetResponse.bind(this))},o.clearImage=function(t){t.preventDefault(),this.hiddenFieldTarget.value=null,this.removeThumbnail()},o.getCloudinarySignature=function(t,e){$.ajax({url:this.signaturesUrlValue,type:"GET",dataType:"text",data:{data:e},complete:function(){console.log("complete")},success:function(e,o,r){t(e)},error:function(t,e,o){console.log(t,e,o)}})},o.handleWidgetResponse=function(t,e){if(!t&&e&&"success"===e.event){var o=e.info;this.hiddenFieldTarget.value=o.public_id,this.removeThumbnail(),this.addThumbnail(this.urlFormatValue.replace("CLOUDINARY_ID",o.public_id))}},o.addThumbnail=function(t){var e=$('<img src="'+t+'" width="'+this.widthValue+'" height="'+this.heightValue+'" data-'+this.identifier+'-target="thumbnail" />');$(this.uploadButtonTarget).prepend(e),this.uploadButtonTarget.classList.add(this.thumbnailShownClass)},o.removeThumbnail=function(){this.hasThumbnailTarget&&(this.uploadButtonTarget.removeChild(this.thumbnailTarget),this.uploadButtonTarget.classList.remove(this.thumbnailShownClass))},e}(t.Controller);a.targets=["uploadButton","hiddenField","thumbnail"],a.values={signaturesUrl:String,height:Number,width:Number,cloudName:String,apiKey:String,googleApiKey:String,urlFormat:String,sources:String,searchByRights:Boolean},a.classes=["thumbnailShown"];var l=function(t){function e(){return t.apply(this,arguments)||this}r(e,t);var i=e.prototype;return i.connect=function(){this.initPluginInstance(),this.colorOptions=$(this.colorOptionsTarget).find("button").map(function(t,e){return $(e).attr("data-color")}).get()},i.disconnect=function(){this.teardownPluginInstance()},i.pickColor=function(t){t.preventDefault();var e=t.target,o=e.dataset.color;$(this.colorInputTarget).val(o),$(this.colorPickerValueTarget).val(o),$(this.userSelectedColorTarget).data("color",o),$(".button-color").removeClass("ring-2 ring-offset-2"),this.pickr.setColor(o),e.classList.add("ring-2","ring-offset-2")},i.pickRandomColor=function(t){t.preventDefault();var e=Math.floor(256*Math.random()),o=Math.floor(256*Math.random()),r=Math.floor(256*Math.random());this.pickr.setColor("rgb "+e+" "+o+" "+r);var i=this.pickr.getColor().toHEXA().toString();this.pickr.setColor(i),this.showUserSelectedColor(i)},i.showUserSelectedColor=function(t){$(this.colorInputTarget).val(t),$(this.colorPickerValueTarget).val(t),$(".button-color").removeClass("ring-2 ring-offset-2"),$(this.userSelectedColorTarget).addClass("ring-2").addClass("ring-offset-2").css("background-color",t).css("--tw-ring-color",t).attr("data-color",t).show()},i.unpickColor=function(t){t.preventDefault(),$(this.colorPickerValueTarget).val(""),$(this.colorInputTarget).val(""),$(this.userSelectedColorTarget).hide(),$(".button-color").removeClass("ring-2 ring-offset-2")},i.togglePickr=function(t){t.preventDefault()},i.initPluginInstance=function(){var t=this;this.pickr=o.default.create({el:".btn-pickr",theme:"monolith",useAsButton:!0,default:this.initialColorValue||"#1E90FF",components:{preview:!0,hue:!0,interaction:{input:!0,save:!0}}}),this.pickr.on("save",function(e,o){var r=e.toHEXA().toString();t.colorOptions.includes(r)||t.showUserSelectedColor(r),t.pickr.hide()});var e=this;$('input[type="text"].pcr-result').on("keydown",function(t){"Enter"===t.key&&e.pickr.applyColor(!1)})},i.teardownPluginInstance=function(){this.pickr.destroy()},e}(t.Controller);l.targets=["colorPickerValue","colorField","colorInput","userSelectedColor","colorOptions"],l.values={initialColor:String},exports.ButtonToggleController=n,exports.CloudinaryImageController=a,exports.ColorPickerController=l;
//# sourceMappingURL=fields.js.map
